<div class="h-full flex flex-col">
  <h3 class="text-sm font-medium text-gray-700 mb-3">Select Report Dashboard</h3>

  <div class="flex gap-2 mb-4">
    <div class="relative flex-1">
      <span
        class="material-icons absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-[18px]"
      >
        search
      </span>

      <input
        type="text"
        placeholder="Search"
        class="w-full pl-9 pr-3 py-2 text-sm rounded-lg bg-gray-100 outline-none focus:ring-2 focus:ring-indigo-400"
        (input)="store.search.set($any($event.target).value)"
      />
    </div>

    <button
      class="px-4 py-2 text-sm rounded-lg bg-indigo-500 text-white hover:bg-indigo-600 transition flex items-center gap-1"
      (click)="open.set(true)"
    >
      <span class="material-icons text-[18px]">add</span>
      ADD
    </button>
  </div>

  <div class="flex-1 overflow-y-auto space-y-1 pr-1">
    @for (r of store.paginatedReports(); track r.id) {
      <div
        (click)="store.select(r.id)"
        class="px-3 py-2 rounded-lg cursor-pointer transition hover:bg-indigo-50"
        [class.bg-indigo-100]="store.selectedId() === r.id"
      >
        <span
          class="text-sm"
          [class.text-indigo-600]="store.selectedId() === r.id"
          [class.text-gray-700]="store.selectedId() !== r.id"
        >
          {{ r.title }}
        </span>
      </div>
    }
  </div>

  <div class="mt-auto pt-4">
    <div class="flex items-center justify-center gap-1">
      <button
        class="w-8 h-8 rounded-full border flex items-center justify-center hover:bg-indigo-100 disabled:opacity-40"
        (click)="store.prevPage()"
        [disabled]="store.page() === 1"
      >
        <span class="material-icons text-[18px]">chevron_left</span>
      </button>

      @for (p of store.pages(); track p) {
        <button
          class="w-8 h-8 rounded-full text-sm flex items-center justify-center transition"
          [class.bg-indigo-500]="store.page() === p"
          [class.text-white]="store.page() === p"
          [class.text-gray-600]="store.page() !== p"
          (click)="store.page.set(p)"
        >
          {{ p }}
        </button>
      }

      <button
        class="w-8 h-8 rounded-full border flex items-center justify-center hover:bg-indigo-100 disabled:opacity-40"
        (click)="store.nextPage()"
        [disabled]="store.page() === store.totalPages()"
      >
        <span class="material-icons text-[18px]">chevron_right</span>
      </button>
    </div>
  </div>
</div>

@if (open()) {
  <app-add-report-modal (close)="open.set(false)" />
}
